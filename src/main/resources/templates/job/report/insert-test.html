<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<title>サンプル</title>
	<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script>
		$(function () {
			$('#submit').click(function () {
				let result = true;

				$(".dateValid").each(function (i, e) {

					// 必須チェック(required)があるか
					if ($(e).attr('required')) {
						console.log('必須要素:' + $(e).val());

						if($(e).val == '') {
							console.log('この要素は必須です');
							result = false;
							return false;
						} else {
							const temp = $(e).val().split('T');
							const date = temp[0];
							const time = temp[1];

							if(date != '' && time != '') {
								const regexDate = /^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/;
								const regexTime = /^([01][0-9]|2[0-3]):[0-5][0-9]$/;

								if(!regexDate.test(date) && regexTime.test(time)) {
									$(e).val('');
									result = false;
									return false;
								}

								console.log('適切な値を確認');

							} else {
								$(e).val('');
								console.log('不正な文字列[空文字]');
								result = false;
								return false;
							}
						}
						
						
					}
					
				});

				if(result){
					alert('画面遷移しちゃいました。');
				} else {
					alert('遷移に失敗しました');
					return false;
				}

				
			});
		});
	</script>
</head>

<body>
	<form action="#">
		<div><input type="datetime-local" class="form-control dateValid" name="date_activity_from" id="date_activity_from"
				required></div>
		<div><input type="datetime-local" class="form-control dateValid" name="date_activity_to" id="date_activity_to"
				required></div>
		<div><input type="datetime-local" class="form-control dateValid" name="date_absence_from" id="date_absence_from">
		</div>
		<div><input type="datetime-local" class="form-control dateValid" name="date_absence_to" id="date_absence_to"></div>
		<div><input type="datetime-local" class="form-control dateValid" name="leave_early_date" id="leave_early_date"></div>
		<div>
			<input type="datetime-local" class="form-control dateValid" name="attendance_date" id="attendance_date">
		</div>


		<input type="submit" id="submit" value="ボタン">
	</form>
</body>

</html>